#! /bin/sh

#
# gets ARCH, THEMES, DESTDIR, INSTSYS_PARTS, BOOT_PARTS via env
#

set -e

mkdir -p $DESTDIR/cd1/boot/$ARCH
for theme in $THEMES ; do
  mkdir -p $DESTDIR/branding/$theme/cd1/boot/$ARCH
done

cp $INSTSYS_PARTS $DESTDIR/cd1/boot/$ARCH

mkdir -p $DESTDIR/cd1/boot/$ARCH/loader
cp -r $BOOT_PARTS $DESTDIR/cd1/boot/$ARCH/loader

for theme in $THEMES ; do
  cp -r images/boot-$theme $DESTDIR/branding/$theme/cd1/boot/$ARCH/loader
  cp images/root-$theme $DESTDIR/branding/$theme/cd1/boot/$ARCH/$theme
  ln -s $theme $DESTDIR/branding/$theme/cd1/boot/$ARCH/branding
done

if [ -d images/boot.isolinux.floppy  ] ; then
  mkdir -p $DESTDIR/ftp/boot/$ARCH/floppy
  cp -a images/boot.isolinux.floppy/* $DESTDIR/ftp/boot/$ARCH/floppy
fi

