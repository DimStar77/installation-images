# This file is actually a shell script.
#
# BUT:
#  - Only shell variable assignments are allowed.
#  - No continuation lines (using '\' at line breaks)!!!

SuSE_major_release=6
SuSE_minor_release=4

syslinux=/usr/sbin/syslinux
linuxrc=/usr/sbin/linuxrc

suse_arch=`uname -m`
suse_arch=`if [ $suse_arch = i686 ] ; then echo i386 ; else echo $suse_arch ; fi`
suse_arch=`if [ $suse_arch = alpha ] ; then echo axp ; else echo $suse_arch ; fi`
suse_arch=`if [ $suse_arch = sparc64 ] ; then echo sparc ; else echo $suse_arch ; fi`

# the SuSE distribution (we get our rpm's from there - unless we are in autobuild)
SuSE_base=/work/CDs/full-$suse_arch

# check if we are in autobuild
in_abuild=`if [ -x /bin/uname.bin ] ; then echo yes ; fi`

# kernel img name
kernel_img=vmlinuz
kernel_img=`if [ $suse_arch = axp ] ; then echo vmlinux.gz ; else echo $kernel_img ; fi`

# kernel rpm name (not needed in autobuild)
kernel_rpm=k_deflt
kernel_rpm=`if [ "$in_abuild" ] ; then rpm -qf /boot/$kernel_img | head -1 | cut -d- -f1 ; else echo $kernel_rpm ; fi`

# kernel version (needed to locate the module directory)
kernel_ver=`if [ "$in_abuild" ] ; then uname -r ; else rpm -qlp $SuSE_base/suse/images/$kernel_rpm.rpm 2>/dev/null | grep modules | head -1 | cut -d / -f 4 ; fi`

