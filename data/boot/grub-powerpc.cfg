with_gfx=0

gfxmode=auto
locale_dir=$prefix/locale
lang=en_US

insmod gzio
insmod gettext

color_normal=light-gray/black
color_highlight=white/light-gray

if [ "$with_gfx" = 1 ] ; then
  insmod gfxterm
  insmod gfxmenu
  insmod png

  terminal_output gfxterm

  theme=$prefix/themes/openSUSE/theme.txt
  export theme

  loadfont $prefix/unicode.pf2
  loadfont $prefix/themes/openSUSE/DejaVuSans10.pf2
  loadfont $prefix/themes/openSUSE/DejaVuSans12.pf2
  loadfont $prefix/themes/openSUSE/DejaVuSans-Bold14.pf2
fi

if sleep --interruptible 0 ; then
  timeout=60
fi


for ARCH in ppc ppc64 ppc64le;do
  if [ -d /boot/$ARCH ];then
    if [ "$ARCH" = "ppc" ];then
      arch = "ppc"
      kernel = "linux32"
      initrd = "initrd32"
    elif [ "$ARCH" = "ppc64" ];then
      arch = "ppc64"
      kernel = "linux64"
      initrd = "initrd64"
    elif [ "$ARCH" = "ppc64le" ];then
      arch = "ppc64le"
      kernel = "linux64"
      initrd = "initrd64"
    fi
  fi
done

menuentry 'Installation' --class opensuse --class gnu-linux --class gnu --class os {
  set gfxpayload=keep
  echo 'Loading kernel ...'
  linuxefi /boot/$arch/loader/$kernel
  echo 'Loading initial ramdisk ...'
  initrdefi /boot/$arch/loader/$initrd
}

menuentry 'Upgrade' --class opensuse --class gnu-linux --class gnu --class os {
  set gfxpayload=keep
  echo 'Loading kernel ...'
  linuxefi /boot/$arch/loader/$kernel upgrade=1
  echo 'Loading initial ramdisk ...'
  initrdefi /boot/$arch/loader/$initrd
}

menuentry 'Rescue System' --class opensuse --class gnu-linux --class gnu {
  set gfxpayload=keep
  echo 'Loading kernel ...'
  linuxefi /boot/$arch/loader/$linux rescue=1
  echo 'Loading initial ramdisk ...'
  initrdefi /boot/$arch/loader/$initrd
}

menuentry 'Check Installation Media' --class opensuse --class gnu-linux --class gnu {
  set gfxpayload=keep
  echo 'Loading kernel ...'
  linuxefi /boot/$arch/loader/$linux mediacheck=1
  echo 'Loading initial ramdisk ...'
  initrdefi /boot/$arch/loader/$initrd
}

submenu 'Other options...' {
 menuentry 'Reboot' {
 reboot
 }

 menuentry 'Exit to Open Firmware' {
 exit
 }
}

